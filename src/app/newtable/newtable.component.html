<div class="display-section" 
  [style.width.px]="this.child.width" 
  [style.height.px]="this.child.height" 
  [ngStyle]="{'background-color': this.child.pageColor}">
  <!-- (click)="disableContextMenu()" oncontextmenu="return false;"> -->
  <h3>Search by description</h3>
    <p><input type="text" name="searchString" placeholder="Search..." [(ngModel)]="searchString"></p>
  <div class="downloadLabel" *ngIf="this.child.isDownloadable">
    <mdb-icon 
      icon="download" 
      (click)="sortBy(header)">
    </mdb-icon>
      Download data
    <a href="https://www.google.com.au/"><span></span></a>
  </div>
  <table class="table-bordered">
    <thead [ngStyle]="{'color': this.child.headerTxtColor,'background-color': this.child.headerBGColor}">
      <tr [ngStyle]="{'font-weight': this.child.fontWeight}">
        <th scope="col" 
          [ngStyle]="{'font-size': this.child.headerFontSize+'px', 
            'font-weight': this.child.fontWeight, 
            'text-align': this.child.headerAlignment}">#</th>
        <th scope="col" 
          *ngFor="let header of headers; let id = index" 
          [class.verticalHeader]="this.child.isVertical"
          [ngStyle]="{'font-size': this.child.headerFontSize+'px', 
            'font-weight': this.child.fontWeight, 
            'text-align': this.child.headerAlignment}"
            [attr.contenteditable]="this.child.contenteditable" (change)="editHeaderValue(id, 'label', $event)">
            {{header.label}} 
              <mdb-icon 
                *ngIf="header.sortable" 
                icon="sort" 
                (click)="sortBy(header)">
              </mdb-icon>
        </th>
      </tr>
    </thead>
    <tbody [ngStyle]="{'color': this.child.tableTxtColor}" >
      <tr 
        *ngFor="let d of data | filter : 'desc' : searchString; let id = index; let odd = odd;" 
        [ngStyle]="{'background-color': odd ? this.child.color : this.child.alternateColor, 'text-align': this.child.textAlignment}">
        <!-- (contextmenu)="onRightClick($event)" > -->
          <th [ngStyle]="{'font-weight': this.child.fontWeight, 'font-size': this.child.tableFontSize+'px'}" scope="row">{{id+1}}</th>
          <td [ngStyle]="{'font-weight': this.child.fontWeight, 'font-size': this.child.tableFontSize+'px'}">
              {{d.title}}
          </td>
          <td [ngStyle]="{'font-weight': this.child.fontWeight, 'font-size': this.child.tableFontSize+'px'}">
              {{d.desc}}
          </td>
          <td [ngStyle]="{'font-weight': this.child.fontWeight, 'font-size': this.child.tableFontSize+'px'}">
              {{d.budget}}
          </td>
          <td [ngStyle]="{'font-weight': this.child.fontWeight, 'font-size': this.child.tableFontSize+'px'}">
              {{d.total_DIN_saved_kgs}}
          </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- contenteditable table -->
<div *ngIf="this.child.contenteditable">
  <table class="table-bordered">
    <thead>
      <tr>
        <th scope="row">#</th>
        <th scope="col" *ngFor="let header of headers; let id = index"
          contenteditable=true 
          (keyup)="editValue(id, 'label', $event)" 
          (blur)="updateTable(id, 'label', $event)">
            {{header.label}}
        </th>
      </tr>
    </thead>
    <tbody >
      <tr *ngFor="let d of data ; let id = index;">
        <th scope="row">{{id+1}}</th>
        <td contenteditable=true (keyup)="editValue(id, 'title', $event)" 
          (blur)="updateTable(id, 'title', $event)">
            {{d.title}}
        </td>
        <td contenteditable=true (keyup)="editValue(id, 'desc', $event)"
          (blur)="updateTable(id, 'desc', $event)">
            {{d.desc}}
        </td>
        <td contenteditable=true (keyup)="editValue(id, 'budget', $event)"
          (blur)="updateTable(id, 'budget', $event)">
            {{d.budget}}
        </td>
        <td contenteditable=true (keyup)="editValue(id, 'total_DIN_saved_kgs', $event)"
          (blur)="updateTable(id, 'total_DIN_saved_kgs', $event)">
            {{d.total_DIN_saved_kgs}}
        </td>
        <td *ngFor="let ct of buttonText">
          <button mdbBtn color="elegant" rounded="true" size="sm" (click)="buttonClicked(d, ct)">{{ct}}</button>
        </td>
      </tr> 
    </tbody>
  </table>
  <button mdbBtn rounded="true" color="elegant" outline="true" mdbWavesEffect (click)="this.child.contenteditable = false">Close</button>
</div>
<!-- End of contenteditable table -->

<!-- right click menu
  <div class="context-menu" *ngIf="contextmenu" [ngStyle]="{'left.px': contextmenuX, 'top.px': contextmenuY}">
  <ul>
      <li *ngFor = "let item of menuItems" >{{item}}</li>
  </ul>
    Right clicked {{nRightClicks}} time(s).
</div>  -->

<app-edit-section 
  (widthUpdated)="widthUpdatedHandler($event)"
  (heightUpdated)="heightUpdatedHandler($event)">
</app-edit-section>